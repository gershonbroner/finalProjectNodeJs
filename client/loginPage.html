<!DOCTYPE html>
<html lang="en">
<head>

</head>
<script>
 async function  logIn(e) {
e.preventDefault()

// get parameters
const userName = document.getElementById("username").value
const email = document.getElementById("email").value

// send request
try{
    const response = await fetch(`http://localhost:3000/login/${userName}/${email}`)
if (!response.ok) {
   
    const errorData = await response.json();
    console.log("Server Error:", errorData.message);
    return;
  }
const data = await response.json(); 
if (data.token) {
    sessionStorage.setItem("token", data.token);
    sessionStorage.setItem("nameuser", data.nameUser);
    window.location.href = "homePage.html";
  } else {
    console.log("Error: Token not received");
  }
}catch(err){
    console.log(err);
}
    }
</script>
<body>
    <form onsubmit="logIn(event)">
        UserName: <input type="text" id="username" required> </br>
        Email:<input type="email" id="email" required> </br>
        <input type="submit" value="log-in"> </br>
    </form>

</body>
</html>